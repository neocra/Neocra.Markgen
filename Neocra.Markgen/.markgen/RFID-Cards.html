<!DOCTYPE html>

<html lang="en">
<head>
    <title></title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.0.0/github-markdown.min.css" integrity="sha512-nxv6uny69e6SeGW/aOEW0iC2+ruQMKvFDbjav6sVu1dr89ioo5wBm3F0IbBGsNyAt6nuBR/x2HUSx0a7wLEegA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script type="module" src="https://unpkg.com/rapidoc/dist/rapidoc-min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
</head>
<body>
<div>
    <menu>
        

<ul>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Overall-Architecture.html">
                    Overall Architecture
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Getting-started.html">
                    Getting started
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Users.html">
                    Users
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/RFID-Cards.html">
                    RFID Cards
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Card-Pricing.html">
                    Card Pricing
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/References.html">
                    References
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Vehicles.html">
                    Vehicles API
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Services.html">
                    Services
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Sessions.html">
                    Sessions
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Mock-(charging-sessions).html">
                    Mock (charging sessions)
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Pricing-Engine.html">
                    Pricing Engine
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Vehicles.html">
                    Vehicles API
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/RFID-Cards.html">
                    RFID Cards
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Pricing-Engine.html">
                    Pricing Engine
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Overall-Architecture.html">
                    Overall Architecture
                </a>
            
            
            

<ul>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Overall-Architecture/Configuration-Conventions.html">
                    Configuration Conventions
                </a>
            
            
            

        </li>
    
</ul>

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Overall-Architecture.html">
                    Overall Architecture
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Card-Pricing.html">
                    Card Pricing
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Getting-started.html">
                    Getting started
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Mock-(charging-sessions).html">
                    Mock (charging sessions)
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Users.html">
                    Users
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/References.html">
                    References
                </a>
            
            
            

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Services.html">
                    Services
                </a>
            
            
            

        </li>
    
        <li>
            
                Retype
            
            
            

<ul>
    
        <li>
            
                References
            
            
            

        </li>
    
        <li>
            
                overall architecture
            
            
            

<ul>
    
        <li>
            
                configuration conventions
            
            
            

        </li>
    
</ul>

        </li>
    
        <li>
            
                Resources
            
            
            

<ul>
    
        <li>
            
                Css
            
            
            

        </li>
    
        <li>
            
                Js
            
            
            

        </li>
    
        <li>
            
                Fonts
            
            
            

        </li>
    
</ul>

        </li>
    
        <li>
            
                card pricing
            
            
            

        </li>
    
        <li>
            
                pricing engine
            
            
            

        </li>
    
        <li>
            
                Sessions
            
            
            

        </li>
    
        <li>
            
                getting started
            
            
            

        </li>
    
        <li>
            
                rfid cards
            
            
            

        </li>
    
        <li>
            
                Users
            
            
            

        </li>
    
        <li>
            
                Vehicles
            
            
            

        </li>
    
        <li>
            
                mock (charging sessions)
            
            
            

        </li>
    
        <li>
            
                Services
            
            
            

        </li>
    
</ul>

        </li>
    
        <li>
            
                <a href="/Neocra.Markgen/Neocra.Markgen/hello-wiki/Sessions.html">
                    Sessions
                </a>
            
            
            

        </li>
    
        <li>
            
                Attachments
            
            
            

        </li>
    
        <li>
            
                Idea
            
            
            

<ul>
    
        <li>
            
                Idea hello wiki dir
            
            
            

<ul>
    
        <li>
            
                Idea
            
            
            

        </li>
    
</ul>

        </li>
    
</ul>

        </li>
    
</ul>

    </menu>
    <article class="markdown-body">
        <h1 id="rfid-cards">RFID Cards</h1>
<p>The <strong>RFID</strong> ( <em>Radio Frequency IDentification</em>) Card, is a physical card, linked to a User account, which allows the driver to access securely the Charging network and the services it provides.
Nearly all the Charging pools connected with Be:Mo's infrastructure have RFID card readers that enable, by touching the card on &amp; off, to :</p>
<ul>
<li>Recognize an active card,</li>
<li>Authenticate the related User account</li>
<li>Trigger &amp; complete the Charging process (from session start until transaction receipt, including payment).</li>
</ul>
<p>The <strong>RFID Micro-service</strong> supports all the Endpoints needed to manage the RFID Card lifecycle. This microservice is divided into 2 domains :</p>
<ul>
<li><strong>Orders</strong> (or <strong>Card Orders</strong>): its endpoints handle the upstream portion of the RFID Card life cycle. It begins with the user ordering a new card &amp; ends when the process is completed or failed.</li>
</ul>
<table>
<thead>
<tr>
<th><strong>Operation</strong></th>
<th style="text-align: center;"><strong>HTTP Method</strong></th>
<th><strong>Endpoint name</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Create</td>
<td style="text-align: center;"><font color='green'><strong>POST</strong> </font></td>
<td>Create a card order for a user</td>
</tr>
<tr>
<td>Read</td>
<td style="text-align: center;"><font color='deepskyblue'><strong>GET</strong> </font></td>
<td>Get all card orders for a Partner</td>
</tr>
<tr>
<td>Read</td>
<td style="text-align: center;"><font color='deepskyblue'><strong>GET</strong> </font></td>
<td>Get all card orders for a user</td>
</tr>
<tr>
<td>Read</td>
<td style="text-align: center;"><font color='deepskyblue'><strong>GET</strong> </font></td>
<td>Get card order by id for a user</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Cards</strong> : manages the downstream portion of the RFID Card lifecycle. The domain includes the endpoints required to retrieve card details and update its status.</li>
</ul>
<table>
<thead>
<tr>
<th><strong>Operation</strong></th>
<th style="text-align: center;"><strong>HTTP Method</strong></th>
<th><strong>Endpoint name</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Read</td>
<td style="text-align: center;"><font color='deepskyblue'><strong>GET</strong> </font></td>
<td>Get all cards for a User</td>
</tr>
<tr>
<td>Read</td>
<td style="text-align: center;"><font color='deepskyblue'><strong>GET</strong> </font></td>
<td>Get a card for a User</td>
</tr>
<tr>
<td>Activate</td>
<td style="text-align: center;"><font color='green'><strong>POST</strong> </font></td>
<td>Activate a (new) RFID card</td>
</tr>
<tr>
<td>Disable</td>
<td style="text-align: center;"><font color='green'><strong>POST</strong> </font></td>
<td>Disable RFID Card</td>
</tr>
<tr>
<td>Enable</td>
<td style="text-align: center;"><font color='green'><strong>POST</strong> </font></td>
<td>Enable a (previously disabled) RFID Card</td>
</tr>
<tr>
<td>Block</td>
<td style="text-align: center;"><font color='green'><strong>POST</strong> </font></td>
<td><font color='red'> Block a RFID card (in case of loss or theft)</td>
</tr>
</tbody>
</table>
<p><strong>PS :</strong> To retrieve the RFID Card Pricing, you must refer to the <strong>Pricing</strong> domain</p>
<blockquote>
<p><strong>Endpoint</strong> :  <strong><a href="/Neocra.Markgen/Neocra.Markgen/hello-wikihttps://sandbox.hello.be-mo.io/#get-/api/v1/pricing/rfidcard/-offerId-/compute">Get the price for a card</a>.</strong> with <code>offerId</code> as a parameter</p>
</blockquote>
<blockquote>
<p><em><strong>Condition</strong> : You must have a prior <code>offerId</code> created for <code>serviceType = rfidCard</code></em>
<em>cf. <a href="/Neocra.Markgen/Neocra.Markgen/hello-wikihttps://sandbox.hello.be-mo.io/#overview--offers">Offers-dedicated documentation</a></em></p>
</blockquote>
<h2 id="card-orders">Card Orders</h2>
<h3 id="order-lifecycle">Order lifecycle</h3>
<hr />
<p>The status of the <strong>order</strong> object can have the following values :</p>
<p><img src="/Neocra.Markgen/Neocra.Markgen/hello-wiki/.attachments/image-a8f4f342-369b-46db-9749-e07a265235fc.png" alt="image.png" /></p>
<table>
<thead>
<tr>
<th style="text-align: center;"><strong>Status</strong></th>
<th><strong>Meaning</strong></th>
<th><strong>Condition</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Pending</td>
<td>Be:Mo has forwarded your make-to-order demand to the card Manufacturer</td>
<td>The partner has created a valid order</td>
</tr>
<tr>
<td style="text-align: center;"><font color='deepskyblue'> <strong>Submitted</strong> </font></td>
<td>The card Manufacturer has processed the application</td>
<td>No technical error or invalid application</td>
</tr>
<tr>
<td style="text-align: center;"><font color='blue'> <strong>Shipped</strong> </font></td>
<td>The card has been made and shipped to the user's shipping address</td>
<td>The card manufacturer has updated the order status</td>
</tr>
<tr>
<td style="text-align: center;"><font color='green'> <strong>Completed</strong> </font></td>
<td>The user has acknowledged receipt by activating the card</td>
<td>The user has completed the card activation process. It is a final step.</td>
</tr>
<tr>
<td style="text-align: center;"><font color='red'> <strong>Aborted</strong> </font></td>
<td>The process fell into error during one of the previous steps between 'pending' &amp; 'shipped'</td>
<td>Technical fatal error. It is a final step.</td>
</tr>
<tr>
<td style="text-align: center;"><font color='red'> <strong>Canceled</strong> </font></td>
<td>The user asked to cancel a card order 'pending', 'submitted' or 'shipped'</td>
<td>Technical fatal error. It is a final step.</td>
</tr>
</tbody>
</table>
<h3 id="order-lifecycle-nominal-process">Order lifecycle (nominal process)</h3>
<hr />
<p><img src="/Neocra.Markgen/Neocra.Markgen/hello-wiki/.attachments/image-46d5d0a3-cb6b-4777-b37d-a500edef0430.png" alt="image.png" /></p>
<details>
  <summary> <font color='blue'> More details on failure use cases </font></summary>
<h3 id="aborted-process-between-pending-submitted">Aborted process (between 'Pending' &amp; 'Submitted')</h3>
<hr />
<p><img src="/Neocra.Markgen/Neocra.Markgen/hello-wiki/.attachments/image-33f12ac4-d08b-4fbf-bb8e-a0ab875c2106.png" alt="image.png" /></p>
<h3 id="aborted-process-between-submitted-shipped">Aborted process (between 'Submitted' &amp; 'Shipped')</h3>
<hr />
<p><img src="/Neocra.Markgen/Neocra.Markgen/hello-wiki/.attachments/image-180d44ed-d0fd-48d7-95e0-c44c74bc79f6.png" alt="image.png" /></p>
</details>
<h3 id="create-a-card-order-for-a-user">Create a card order for a user</h3>
<hr />
<p>This reference describes how to order a new RFID Card through the REST API.
The order triggers the request for the manufacturing of RFID card and its delivery to the User.</p>
<h4 id="path-parameter">Path Parameter</h4>
<blockquote>
<p><code>userId</code> : The user Identifier in Be:Mo's system.</p>
</blockquote>
<h4 id="required-parameters">Required parameters</h4>
<blockquote>
<p><code>cardNumber</code> : this field refers to a unique identification number in your system</p>
</blockquote>
<blockquote>
<p><code>offerId</code> : the pricing offer Identifier in Be:Mo's system.</p>
</blockquote>
<blockquote>
<p><code>billingAddress</code> refers to the place to which the invoice is sent. It is also specified on the invoice.<br />
<font color='red'>Limitation : To set up a billing address, you must provide , at a minimum, values to <code>line1</code>, <code>city</code>, <code>zipCode</code> and <code>country</code> fields.</font></p>
<ul>
<li><code>line1</code> : <em>The first line of the contact's address, which is often a street address or business name.</em></li>
<li><code>line2</code> : <em>The second line of the contact's address.</em></li>
<li><code>line3</code> : <em>The third line of the contact's address.</em></li>
<li><code>line4</code> : <em>The fourth line of the contact's address.</em></li>
<li><code>city</code>  : <em>The city of the contact's address.</em></li>
<li><code>localityRegionState</code> : <em>The locality, region or state of the contact's address.</em></li>
<li><code>zipCode</code> : <em>The zipcode of the contact's address.</em></li>
<li><code>country</code> : <em>The country of the contact's address.</em></li>
</ul>
</blockquote>
<blockquote>
<p><code>shippingAddress</code> refers to the place to which the RFID card should be delivered.
<font color='red'>Limitation : To set up a shipping address, you must provide , at a minimum, values to <code>line1</code>, <code>city</code>, <code>zipCode</code> and <code>country</code> fields.</font></p>
<ul>
<li><code>line1</code> : <em>The first line of the contact's address, which is often a street address or business name.</em></li>
<li><code>line2</code> : <em>The second line of the contact's address.</em></li>
<li><code>line3</code> : <em>The third line of the contact's address.</em></li>
<li><code>line4</code> : <em>The fourth line of the contact's address.</em></li>
<li><code>city</code>  : <em>The city of the contact's address.</em></li>
<li><code>localityRegionState</code> : <em>The locality, region or state of the contact's address.</em></li>
<li><code>zipCode</code> : <em>The zipcode of the contact's address.</em></li>
<li><code>country</code> : <em>The country of the contact's address.</em></li>
</ul>
</blockquote>
<h3 id="get-all-card-orders-for-a-partner">Get all card orders for a partner</h3>
<hr />
<p>Retrieves the information about all the orders previously created for all the users of your organization.</p>
<h4 id="query-parameters-optional">Query parameters (optional)</h4>
<blockquote>
<p><code>orderId</code></p>
</blockquote>
<blockquote>
<p><code>cardNumber</code></p>
</blockquote>
<h3 id="get-all-card-orders-for-a-user">Get all card orders for a user</h3>
<hr />
<p>Retrieves the information about all the orders previously created by the user thanks to his/her userId.</p>
<h4 id="path-parameter-1">Path parameter</h4>
<blockquote>
<p><code>userId</code></p>
</blockquote>
<h3 id="get-card-order-by-id-for-a-user">Get card order by id for a user</h3>
<hr />
<p>Retrieves the information about a card order previously created thanks to the orderId.</p>
<h4 id="path-parameter-2">Path parameter</h4>
<blockquote>
<p><code>userId</code></p>
</blockquote>
<blockquote>
<p><code>orderId</code></p>
</blockquote>
<h2 id="link-between-card-order-and-card-lifecycles">Link between 'Card Order' and 'Card' lifecycles</h2>
<hr />
<p><img src="/Neocra.Markgen/Neocra.Markgen/hello-wiki/.attachments/image-065be47e-d9c2-447a-8828-79a626c46230.png" alt="image.png" /></p>
<h2 id="cards">Cards</h2>
<h3 id="card-lifecycle">Card lifecycle</h3>
<hr />
<p>The status of the <strong>card</strong> object can have the following values :</p>
<p><img src="/Neocra.Markgen/Neocra.Markgen/hello-wiki/.attachments/image-bc812c1e-9095-45fa-b973-f1112bd312f7.png" alt="image.png" /></p>
<table>
<thead>
<tr>
<th style="text-align: center;"><strong>Status</strong></th>
<th><strong>Meaning</strong></th>
<th><strong>Condition</strong></th>
<th style="text-align: left;"><strong>Related event message</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><font color='black'> <strong>NotActivated</strong> </font></td>
<td>Be:Mo has created the card in its system. <strong>The access to the services (via RFID card) is not allowed yet</strong>. Waiting for first activation.</td>
<td>The card manufacturer has sent a <strong>orderShipped</strong> notification.</td>
<td style="text-align: left;"><em>CardCreated</em></td>
</tr>
<tr>
<td style="text-align: center;"><font color='green'> <strong>Activated</strong> </font></td>
<td>The card is active and fully usable</td>
<td>The user has completed the card activation process (Fist Activation) <strong>OR</strong> the partner has enabled a previously disabled card</td>
<td style="text-align: left;"><em>CardActivated</em></td>
</tr>
<tr>
<td style="text-align: center;"><font color='orange'> <strong>Disabled</strong> </font></td>
<td>The card is disabled. <strong>The access to the services (via RFID card) has been cut off</strong></td>
<td>The partner has disabled a previously enabled card</td>
<td style="text-align: left;"><em>CardDisabled</em></td>
</tr>
<tr>
<td style="text-align: center;"><font color='red'> <strong>Blocked</strong> </font></td>
<td>The card is definitely blocked. <strong>The access to the services (via RFID card) has been cut off</strong>. It cannot be activated anymore.</td>
<td>The user has signaled a loss or theft.</td>
<td style="text-align: left;"><em>CardBlocked</em></td>
</tr>
<tr>
<td style="text-align: center;"><font color='red'> <strong>Expired</strong> </font></td>
<td><em>The card is definitely expired. <strong>The access to the services (via RFID card) has been cut off</strong>. It cannot be activated anymore.</em></td>
<td><em><strong>Optional</strong> : Automatically setted up when the Card's expireDate (if entered by the Partner) has passed.</em></td>
<td style="text-align: left;"><em>CardBlocked</em></td>
</tr>
</tbody>
</table>
<h3 id="card-lifecycle-disabling-enabling-processes">Card lifecycle (Disabling &amp; enabling processes)</h3>
<hr />
<p><img src="/Neocra.Markgen/Neocra.Markgen/hello-wiki/.attachments/image-032f62b8-ebf4-4b17-b668-1bcf11e61df0.png" alt="image.png" /></p>
<h3 id="get-all-cards-of-a-partner">Get all cards of a partner</h3>
<hr />
<p>Retrieves the information about all the RFID cards belonging to all the users of your organization.</p>
<h4 id="query-parameter-optional">Query parameter (optional)</h4>
<blockquote>
<p><code>cardNumber</code> : this field refers to a unique identification number in your system. Entered during order creation.</p>
</blockquote>
<h3 id="get-all-cards-of-a-user">Get all cards of a user</h3>
<hr />
<p>Retrieves the information about all the RFID cards belonging to a given user thanks to his/her userId.</p>
<h4 id="path-parameter-3">Path parameter</h4>
<blockquote>
<p><code>userId</code> : User's Identifier in Be:Mo's system.</p>
</blockquote>
<h3 id="get-a-card-for-a-user">Get a card for a user</h3>
<hr />
<p>Retrieves the information about a given user's RFID card.</p>
<h4 id="path-parameter-4">Path parameter</h4>
<blockquote>
<p><code>cardId</code> : RFID card's Identifier in Be:Mo's system.</p>
</blockquote>
<blockquote>
<p><code>userId</code> : User's Identifier in Be:Mo's system.</p>
</blockquote>
<h3 id="activate-a-rfid-card">Activate a RFID Card</h3>
<hr />
<p>Enables the User to activate his/her new card.
After the process, the card is recognized by CPO's RFID Card readers.</p>
<h4 id="path-parameter-5">Path parameter</h4>
<blockquote>
<p><code>cardId</code> : RFID card's Identifier in Be:Mo's system.</p>
</blockquote>
<blockquote>
<p><code>userId</code> : User's Identifier in Be:Mo's system.</p>
</blockquote>
<h4 id="required-parameter">Required parameter</h4>
<blockquote>
<p><code>verificationCode</code> : the 6 last digits of cardNumber</p>
</blockquote>
<h3 id="disable-a-rfid-card">Disable a RFID Card</h3>
<hr />
<p>Deactivate temporarly an active Card.
The card will be blacklisted and unable to trigger any charging process.
The Endpoint <strong>Reactivate Card</strong> enables to reverse the process.</p>
<h4 id="path-parameter-6">Path parameter</h4>
<blockquote>
<p><code>cardId</code> : RFID card's Identifier in Be:Mo's system.</p>
</blockquote>
<blockquote>
<p><code>userId</code> : User's Identifier in Be:Mo's system.</p>
</blockquote>
<h3 id="enable-a-previously-disabled-rfid-card">Enable a (previously disabled) RFID Card</h3>
<hr />
<p>Enables the User to reactivate a previously disabled card.
After the process, the card is recognized again by CPO's RFID Card readers.</p>
<h4 id="prerequisite">Prerequisite</h4>
<p><font color='red'> The card has been previously disabled. </font></p>
<h4 id="path-parameter-7">Path parameter</h4>
<blockquote>
<p><code>cardId</code> : RFID card's Identifier in Be:Mo's system.</p>
</blockquote>
<blockquote>
<p><code>userId</code> : User's Identifier in Be:Mo's system.</p>
</blockquote>
<h3 id="block-a-rfid-card">Block a RFID Card</h3>
<hr />
<p>Disable definitely the RFID Card of a user.
The card will be blacklisted and unable to trigger any charging process.
<font color='red'> Limitation : There is no turning back possible. A blocked card cannot be reactivated anymore. </font></p>
<blockquote>
<p><code>cardId</code></p>
</blockquote>
<blockquote>
<p><code>userId</code></p>
</blockquote>
<h2 id="testing-card-orders">Testing card orders</h2>
<hr />
<blockquote>
<p><strong>METHOD #1 : SET DIRECTLY THE FINAL STATE WHILE CREATING THE ORDER</strong></p>
</blockquote>
<p>Card ordering process could be mocked for testing purpose.
By default, in tests environments, card ordering states are mocked until &quot;shipped&quot; state within 120 seconds.
You will then be able to activate the card in common passing case.
You can also override default mocking if you want a specific order state.
To do this, you could add a custom expression in the shipping address.</p>
<p><em>Shipping address could be passed in create order or create user operation</em></p>
<h3 id="expression-format">Expression format</h3>
<table>
<thead>
<tr>
<th><strong>Instruction</strong></th>
<th><strong>Description</strong></th>
<th><strong>Possible values</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>mock</td>
<td>mock type: always 'order' in this case</td>
<td>'order'</td>
</tr>
<tr>
<td>s</td>
<td>final order status desired</td>
<td>'<font color='deepskyblue'> <strong>Submitted</strong> </font>' or '<font color='red'> <strong>Aborted</strong> </font>' or '<font color='blue'> <strong>Shipped</strong> </font>'</td>
</tr>
<tr>
<td>d</td>
<td>delay for each state change in seconds</td>
<td>any integer</td>
</tr>
</tbody>
</table>
<h3 id="mock-expression-used-by-default">Mock expression used by default</h3>
<table>
<thead>
<tr>
<th><strong>Mock used by default</strong></th>
<th><strong>States changes</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>{mock:'order' ,s:'Shipped', d: 60}</td>
<td>pending =&gt; <font color='deepskyblue'> <strong>Submitted</strong> </font> =&gt; <font color='blue'> <strong>Shipped</strong> </font></td>
</tr>
</tbody>
</table>
<h3 id="examples-of-custom-mock-expressions-to-be-added-in-shipping-address">Examples of custom Mock expressions to be added in shipping address</h3>
<table>
<thead>
<tr>
<th><strong>Custom Mock expressions</strong></th>
<th><strong>States changes</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>{mock:'order' ,s:'Submitted', d: 100 }</td>
<td>pending =&gt; <font color='deepskyblue'> <strong>Submitted</strong> </font></td>
</tr>
<tr>
<td>{mock:'order' ,s:'Shipped', d: 100 }</td>
<td>pending =&gt; <font color='deepskyblue'> <strong>Submitted</strong> </font> =&gt; <font color='blue'> <strong>Shipped</strong> </font></td>
</tr>
<tr>
<td>{mock:'order' ,s:'Aborted', d: 100 }</td>
<td>pending =&gt; <font color='deepskyblue'> <strong>Submitted</strong> </font> =&gt; <font color='red'> <strong>Aborted</strong> </font></td>
</tr>
</tbody>
</table>
<h3 id="integration-in-shipping-address">Integration in shipping address</h3>
<hr />
<p>Place the mock expression among any address lines of shipping Address
shippingAddress will be posted on create user or create order opération</p>
<p>Here's a sample payload for shippingAddress which contains mock expression:</p>
<pre><code> &quot;shippingAddress&quot;: {
    &quot;line1&quot;: &quot;12 Meril Street&quot;,
    &quot;line2&quot;: &quot;&quot;,
    &quot;line3&quot;: &quot;&quot;,
    &quot;line4&quot;: &quot;{mock:'order' ,s:'Submitted', d: 100 }&quot;,
    &quot;city&quot;: &quot;Paris&quot;,
    &quot;localityRegionState&quot;: &quot;Idf&quot;,
    &quot;zipCode&quot;: 75010,
    &quot;country&quot;: &quot;string&quot;
  },
</code></pre>
<blockquote>
<p><strong>METHOD #2 : FORCE ORDER STATUS BY CALLING 'Mock card order status' endpoint</strong></p>
<blockquote>
<p><strong><em>Prerequisite :</em></strong> <a href="/Neocra.Markgen/Neocra.Markgen/hello-wikihttps://sandbox.hello.be-mo.io/#post-/api/v1/users/-userId-/cards/orders"><em>Create a card order for a user</em></a></p>
</blockquote>
</blockquote>
<h3 id="mock-card-status">Mock card status</h3>
<hr />
<p>Enables the partner to force the status of a prior order from an initial status to a 'target' one.</p>
<blockquote>
<p><font color='red'><em><strong>Limitation</strong> : The change from the initial <code>orderStatus</code> to the<code>TargetStatus</code> must be allowed by the workflow of Card order status.</em></font></p>
</blockquote>
<p><img src="/Neocra.Markgen/Neocra.Markgen/hello-wiki/.attachments/image-4d2ab293-d727-4574-903a-935625c17efa.png" alt="image.png" /></p>
<h4 id="required-parameters-1">Required parameters</h4>
<blockquote>
<p><code>orderId</code> : identifier of the card order in Be:Mo's database</p>
</blockquote>
<blockquote>
<p><code>targetStatus</code> : desired order status after the API call.</p>
</blockquote>

    </article>
</div>
</body>
</html>
